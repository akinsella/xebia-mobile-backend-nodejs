// Generated by CoffeeScript 1.6.3
var Card, cardById, cards, cardsByCategoryId, categories, utils, _;

utils = require('../lib/utils');

_ = require('underscore')._;

Card = require('../service/card');

cards = function(req, res) {
  cards = Card.cards();
  return utils.responseData(200, "", cards, {
    req: req,
    res: res
  });
};

categories = function(req, res) {
  categories = Card.categories();
  return utils.responseData(200, "", categories, {
    req: req,
    res: res
  });
};

cardsByCategoryId = function(req, res) {
  var category, categoryId, data;
  categoryId = req.params.id;
  category = _(Card.categories().categories).find(function(category) {
    return category.id === categoryId;
  });
  cards = _(Card.cards().cards).filter(function(card) {
    return card.category.id === categoryId;
  });
  data = {
    category: category,
    cards: cards
  };
  return utils.responseData(200, "", data, {
    req: req,
    res: res
  });
};

cardById = function(req, res) {
  var cardId;
  cardId = req.params.id;
  cards = _(Card.cards().cards).find(function(card) {
    return card.id === cardId;
  });
  return utils.responseData(200, "", cards, {
    req: req,
    res: res
  });
};

module.exports = {
  cards: cards,
  cardById: cardById,
  categories: categories,
  cardsByCategoryId: cardsByCategoryId
};

/*
//@ sourceMappingURL=card.map
*/
