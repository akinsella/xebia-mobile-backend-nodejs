!function(){"use strict";angular.module("xebia-mobile-backend",[]).config(["$routeProvider","$locationProvider","$httpProvider",function($routeProvider,$locationProvider,$httpProvider){$routeProvider.when("/",{templateUrl:"partials/index.html",controller:"RootCtrl"}).when("/login",{templateUrl:"partials/login.html",controller:"AuthCtrl"}).when("/account",{templateUrl:"partials/account.html",controller:"AuthCtrl"}).when("/news",{templateUrl:"partials/news/list.html",controller:"NewsCtrl"}).when("/news/create",{templateUrl:"partials/news/create.html",controller:"NewsCtrl"}).when("/news/update",{templateUrl:"partials/news/update.html",controller:"NewsCtrl"}).when("/notifications",{templateUrl:"partials/notifications/list.html",controller:"NotificationsCtrl"}).when("/notifications/create",{templateUrl:"partials/notifications/create.html",controller:"NotificationsCtrl"}).when("/notifications/update",{templateUrl:"partials/notifications/update.html",controller:"NotificationsCtrl"}).when("/devices",{templateUrl:"partials/devices/list.html",controller:"DevicesCtrl"}).when("/devices/create",{templateUrl:"partials/devices/create.html",controller:"DevicesCtrl"}).when("/devices/update",{templateUrl:"partials/devices/update.html",controller:"DevicesCtrl"}).otherwise({redirectTo:"/"});return $httpProvider.responseInterceptors.push("errorHttpInterceptor")}]).run(["$rootScope","$http","$location",function($rootScope,$http,$location){$rootScope.$on("event:loginRequired",function(){window.location="/login"});$rootScope.user={role:"ROLE_ANONYMOUS"};$http.get("/users/me").success(function(user){$rootScope.user=user});$rootScope.Auth={user:function(){return $rootScope.user},isAuthenticated:function(){return this.hasNotRole("ROLE_ANONYMOUS")},isNotAuthenticated:function(){return!this.isAuthenticated()},hasRole:function(role){return $rootScope.user.role===role},hasNotRole:function(role){return $rootScope.user.role!==role}}}]).controller("RootCtrl",["$scope","$location","ErrorService",function($scope,$location,ErrorService){$scope.selectedMenuItem=undefined;$scope.errorService=ErrorService;$scope.selectMenuItem=function(menuItem){console.log("Select MenuItem: ["+menuItem.id+"]");$scope.selectedMenuItem=menuItem};$scope.$watch("selectedMenuItem",function(newVal,oldVal){console.log(newVal,oldVal)});$scope.isMenuActive=function(selectedMenuItem,menuItem){console.log("MenuItem is Active ? ["+menuItem.id+"]");console.log("Selected MenuItem: ["+selectedMenuItem.id+"]");return menuItem.id===selectedMenuItem.id};$scope.menus=[{id:"news",name:"News",items:[{name:"News",url:"#/news"}]},{id:"notifications",name:"Notifications",items:[{name:"Messages",url:"#/notifications"},{name:"Devices",url:"#/devices"}]}];$scope.selectedMenuItem=$scope.menus[0]}]).controller("SidebarCtrl",function($scope){}).controller("ContentCtrl",function($scope){$scope.sidebar="no"}).controller("IndexCtrl",function($scope){$scope.title="Home";$scope.user=user;$scope.authenticated=false}).directive("appVersion",["version",function(version){return function(scope,elm,attrs){elm.text(version)}}]).directive("alertBar",["$parse",function($parse){return{restrict:"A",template:'<div class="alert alert-error alert-bar" ng-show="errorMessage">\n	<button type="button" class="close" ng-click="hideAlert()">x</button>\n	{{errorMessage}}\n</div>',link:function(scope,elem,attrs){var alertMessageAttr;alertMessageAttr=attrs["alertmessage"];scope.errorMessage=null;scope.$watch(alertMessageAttr,function(newVal){return scope.errorMessage=newVal});return scope.hideAlert=function(){scope.errorMessage=null;return $parse(alertMessageAttr).assign(scope,null)}}}}]).factory("ErrorService",function(){return{errorMessage:null,setError:function(msg){this.errorMessage=msg},clear:function(){this.errorMessage=null}}}).filter("interpolate",["version",function(version){return function(text){return String(text).replace(/\%VERSION\%/gm,version)}}]).value("version","0.1")}();!function(){"use strict";angular.module("xebia-mobile-backend").controller("UserDetailsCtrl",function($scope){}).controller("AuthCtrl",function($scope){}).factory("errorHttpInterceptor",function($q,$location,ErrorService,$rootScope){return function(promise){return promise.then(function(response){return response},function(response){if(response.status===401){$rootScope.$broadcast("event:loginRequired")}else if(response.status>=400&&response.status<500){ErrorService.setError("Server was unable to find  what you were looking for... Sorry!!")}return $q.reject(response)})}}).factory("authHttp",function($http,Authentication){var authHttp,extendHeaders;authHttp={};extendHeaders=function(config){config.headers=config.headers||{};return config.headers["Authorization"]=Authentication.getTokenType()+" "+Authentication.getAccessToken()};angular.forEach(["get","delete","head","jsonp"],function(name){return authHttp[name]=function(url,config){config=config||{};extendHeaders(config);return $http[name](url,config)}});angular.forEach(["post","put"],function(name){return authHttp[name]=function(url,data,config){config=config||{};extendHeaders(config);return $http[name](url,data,config)}});return authHttp})}();!function(){"use strict";angular.module("xebia-mobile-backend").factory("DeviceData",["$http",function($http){return{devices:function(){return $http({method:"JSONP",url:"/devices?callback=JSON_CALLBACK"})}}}]).controller("DevicesCtrl",["$scope","DeviceData",function($scope,DeviceData){console.log("Devices Controller");DeviceData.devices().then(function(response){$scope.devices=response.data;console.log("Devices",response.data)})}])}();!function(){"use strict";angular.module("xebia-mobile-backend").controller("NewsCtrl",["$scope","$location","ErrorService",function($scope,$location,ErrorService){}])}();!function(){"use strict";angular.module("xebia-mobile-backend").factory("NotificationData",["$http",function($http){return{notifications:function(){return $http({method:"JSONP",url:"/notifications?callback=JSON_CALLBACK"})}}}]).controller("NotificationsCtrl",["$scope","$location","NotificationData",function($scope,$location,NotificationData){console.log("Notifications Controller");NotificationData.notifications().then(function(response){$scope.notifications=response.data;console.log("Notifications",response.data)});$scope.createNotification=function(){$location.path("#/notification/createNotification.html")}}])}();!function(){console.log("Hello Coffee !")}.call(this);